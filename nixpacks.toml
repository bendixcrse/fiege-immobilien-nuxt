# nixpacks.toml
providers = ["node"]

[variables]
# hier die gew√ºnschte Node-Major angeben
NIXPACKS_NODE_VERSION = "23"   # (oder "23", wenn deine Nixpacks-Version das schon kann)

[phases.install]
# Corepack + pnpm sicherstellen und Dependencies installieren
cmds = [
  "curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash",
  "export NVM_DIR=\"$HOME/.nvm\"",
  ". \"$NVM_DIR/nvm.sh\"",
  "nvm install 23",
  "nvm use 23",
  "node -v",
  "pnpm i --frozen-lockfile"
]

[phases.build]
cmds = ["pnpm run build"]  # oder "pnpm run generate" je nach Projekt